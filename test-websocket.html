<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Test</title>
</head>
<body>
    <h1>WebSocket Connection Test</h1>
    <button onclick="testWebSocket()">Test WebSocket</button>
    <div id="output"></div>

    <script>
        function testWebSocket() {
            const sessionId = 'test-session-123';
            const wsUrl = 'ws://localhost:8000/ws/research/' + sessionId;

            const output = document.getElementById('output');
            output.innerHTML += '<p>Attempting to connect to: ' + wsUrl + '</p>';

            const ws = new WebSocket(wsUrl);

            ws.onopen = () => {
                output.innerHTML += '<p style="color: green">‚úÖ WebSocket CONNECTED!</p>';
                ws.send('ping');
            };

            ws.onmessage = (event) => {
                output.innerHTML += '<p>üì© Received: ' + event.data + '</p>';
            };

            ws.onerror = (error) => {
                output.innerHTML += '<p style="color: red">‚ùå WebSocket ERROR: ' + JSON.stringify(error) + '</p>';
                console.error('WebSocket error:', error);
            };

            ws.onclose = () => {
                output.innerHTML += '<p style="color: orange">üîå WebSocket CLOSED</p>';
            };
        }
    </script>
</body>
</html>
